#pragma config(Hubs,  S1, HTMotor,  none,     none,     none)
#pragma config(Sensor, S2,     gyro,           sensorI2CHiTechnicGyro)
#pragma config(Motor,  mtr_S1_C1_1,     motorLeft,     tmotorTetrix, openLoop, encoder)
#pragma config(Motor,  mtr_S1_C1_2,     motorRight,    tmotorTetrix, openLoop, reversed, encoder)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

#include "JoystickDriver.c";

//the zone in which the joystick does not give a value to the motors to use
int deadZone = 15;

//the zone in which the gyro does not trigger a correction from the motors
int gyroDeadZone = 20;
//the ratio of the speed of the motor and the gyro's value
int speedMultiplier = 5;//FIND A VALUE OTHER THAN THIS!!!!
//time it takes to accelerate to full speed
//int accelerationTime = 5000;
task main()
{
	ClearTimer(T1);
	while (true)
	{

		getJoystickSettings(joystick);

		//get the value of the gyro
		int gyroValue = SensorValue[gyro];

		//make the motor acceleration
		int motorAcceleration = speedMultiplier * gyroValue;

		//keep robot upright and mostly stationary

		/*if (abs(joystick.joy1_y2) > deadZone)
		{
			motor[motorLeft] = joystick.joy1_y2;
			motor[motorRight] = joystick.joy1_y2;

			if (gyroValue != gyroDeadZone)
			{
				motor[motorLeft] = motorAcceleration;
				motor[motorRight] = motorAcceleration;
			}
		}*/
		if (//gyroValue > 15 || gyroValue < -15 &&
			gyroValue != gyroDeadZone)
		{
			motor[motorLeft] = motorAcceleration;
			motor[motorRight] = motorAcceleration;
		}
		/*else if (SensorValue[gyro] < -15)
		{
			motor[motorLeft] = -5;
			motor[motorRight] = -5;
		}*/
		else
		{
			motor[motorLeft] = 0;
			motor[motorRight] = 0;
		}

		/*
		move robot with joystick values
		getJoystickSettings(joystick);

		if (abs(joystick.joy1_y2) > deadZone)
		{
			motor[motorLeft] = joystick.joy1_y2;
			motor[motorRight] = joystick.joy1_y2;
		}
		else if (abs(joystick.joy1_x1) > deadZone)
		{
			motor[motorLeft] = joystick.joy1_x1;
			motor[motorRight] = -joystick.joy1_x1;
		}
		else
		{
			motor[motorLeft] = 0;
			motor[motorRight] = 0;
		}*/
	}
}
